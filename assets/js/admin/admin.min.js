function createMap(lat,lng){const map=new google.maps.Map(document.getElementById("map"),{center:{lat:lat,lng:lng},zoom:15,disableDoubleClickZoom:!0,disableDefaultUI:!0,fullscreenControl:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1});let marker=new google.maps.Marker({position:{lat:lat,lng:lng},map:map,draggable:!0});google.maps.event.addListener(marker,"dragend",function(event){var pos;console.log(this),$("#eventLat").val(this.getPosition().lat()),$("#eventLng").val(this.getPosition().lng()),pos=marker.getPosition(),(new google.maps.Geocoder).geocode({latLng:pos},function(responses){responses&&responses.length>0?$("#eventLocation").val(responses[0].formatted_address):console.log("Cannot determine address at this location.")})})}$=jQuery,variables.eventBriteKey?$("#eventSelect").length&&(console.log("https://www.eventbriteapi.com/v3/users/me/events/?token="+variables.eventBriteKey),$.ajax({url:"https://www.eventbriteapi.com/v3/users/me/events/?token="+variables.eventBriteKey,dataType:"json",success:function(success){const events=success.events;for(var selected="",i=0;i<events.length;i++)selected=events[i].id==variables.currentEventID?"selected":"",$("#eventSelect").append("<option "+selected+' value="'+events[i].id+'">'+events[i].name.text+"</option>");if($("#eventSelect").fadeIn(),"edit"===variables.pageType){var editLat=$("#eventLat").val(),editLng=$("#eventLng").val();$("#eventStartTimeSelect").dateTimePicker({selectData:$("#eventStartTime").val()}),$("#eventEndTimeSelect").dateTimePicker({selectData:$("#eventEndTime").val()}),createMap(Number(editLat),Number(editLng)),$("#map").fadeIn(),$(".form-group").fadeIn()}$(".loader").remove()},error:function(error){console.log(error)}}),$("#eventSelect").change(function(){const value=$(this).val();$(".form-group").hide(),value.length>0&&($('<div class="loader"></div>').insertAfter($(this)),$.ajax({url:"https://www.eventbriteapi.com/v3/events/"+value+"/?token="+variables.eventBriteKey+"&expand=venue",dataType:"json",success:function(event){const eventDetails=event;console.log(eventDetails),$.ajax({url:"https://www.eventbriteapi.com/v3/events/"+eventDetails.id+"/description/?token="+variables.eventBriteKey,dataType:"json",success:function(moreDetails){console.log(moreDetails),tinymce.editors.eventDescriptionEditor.setContent(moreDetails.description)},error:function(err){console.log(err),console.log("error in getting more info about the event")}}),$("#title").val(eventDetails.name.text).blur(),$("#title-prompt-text").addClass("screen-reader-text"),$("#eventBio").find("textarea").val(eventDetails.description.text),$("#eventStartTime").val(eventDetails.start.local),$("#eventEndTime").val(eventDetails.end.local),$("#eventStartTimeSelect").dateTimePicker({selectData:$("#eventStartTime").val()}),$("#eventEndTimeSelect").dateTimePicker({selectData:$("#eventEndTime").val()}),$("#eventLocation").val(eventDetails.venue.address.localized_address_display),$("#eventLat").val(eventDetails.venue.address.latitude),$("#eventLng").val(eventDetails.venue.address.longitude),$("#eventLink").val(eventDetails.url),createMap(Number(eventDetails.venue.address.latitude),Number(eventDetails.venue.address.longitude)),$(".loader").remove(),$("#map").fadeIn(),$(".form-group").fadeIn()},error:function(error){console.log(error)}}))})):($(".loader").remove(),$("#normal-sortables .inside").append("<p>You need to include a Eventbrite API Key to add an event.</p>")),$(document).ready(function(){if($("#podcastType").length){const val=$("#podcastType").val().toLowerCase();$("."+val).fadeIn().removeClass("hidden")}}),$(document).on("change","#podcastType",function(e){const val=$(this).val().toLowerCase();$(".podcastType").hide(),$("."+val).fadeIn().removeClass("hidden")}),$(document).on("click",'button[data-type="upload"]',function(e){e.preventDefault();$(this);const formGroup=$(this).parent(".form-group"),types=formGroup.data("type").split(",");var items_frame;formGroup.find(".errors").remove(),items_frame?items_frame.open():((items_frame=wp.media.frames.items=wp.media({title:"Add Media to Gallery",button:{text:"Select or Upload a Media Item"},library:{type:types}})).open(),items_frame.on("select",function(){const attachment=items_frame.state().get("selection").first().toJSON();if(types.includes(attachment.type)){switch(formGroup.find(".hiddenCustomInput").val(attachment.id),attachment.type){case"audio":formGroup.find("source").attr("src",attachment.url);let audioPlayer=formGroup.find("audio");audioPlayer.get(0).pause(),audioPlayer.get(0).load();break;case"video":formGroup.find("source").attr("src",attachment.url);let videoPlayer=formGroup.find("video");videoPlayer.get(0).pause(),videoPlayer.get(0).load();break;case"image":formGroup.find("img").attr("src",attachment.url)}formGroup.find('button[data-type="remove"]').removeClass("hidden")}else formGroup.prepend(`\n                <div class="errors">\n                    <p>Error: Must be a valid media type for this input. Please upload one of theset types: ${types} </p>\n                </div>\n            `)}))}),$(document).on("click",'button[data-type="remove"]',function(e){e.preventDefault();const formGroup=$(this).parent(".form-group"),types=formGroup.data("type").split(",");switch(formGroup.find(".hiddenCustomInput").val(""),types[0]){case"audio":formGroup.find("source").attr("src","");let audioPlayer=formGroup.find("audio");audioPlayer.get(0).pause(),audioPlayer.get(0).load();break;case"video":formGroup.find("source").attr("src","");let videoPlayer=formGroup.find("video");videoPlayer.get(0).pause(),videoPlayer.get(0).load();break;case"image":formGroup.find("img").attr("src","")}});